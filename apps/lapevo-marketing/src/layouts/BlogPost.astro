---
import BaseLayout from "./BaseLayout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import type { CollectionEntry } from "astro:content";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const { title, description, pubDate, author, tags } = post.data;

const formattedDate = pubDate.toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
---

<BaseLayout title={title} description={description}>
  <Header />
  <main class="pt-24 pb-20">
    <article class="mx-auto max-w-3xl px-6">
      <!-- Header -->
      <header class="mb-12">
        <div class="flex items-center gap-2 text-sm text-muted-foreground mb-4">
          <a href="/blog" class="hover:text-foreground transition-colors"
            >&larr; Back to Blog</a
          >
        </div>

        <h1 class="text-3xl md:text-4xl font-bold mb-4">{title}</h1>

        <div
          class="flex flex-wrap items-center gap-4 text-sm text-muted-foreground"
        >
          <span>{formattedDate}</span>
          <span>&bull;</span>
          <span>{author}</span>
        </div>

        {
          tags.length > 0 && (
            <div class="flex flex-wrap gap-2 mt-4">
              {tags.map((tag) => (
                <span class="rounded-full bg-blue-500/10 px-3 py-1 text-xs text-blue-400">
                  {tag}
                </span>
              ))}
            </div>
          )
        }
      </header>

      <!-- Content -->
      <div
        class="prose prose-invert prose-lg max-w-none
        prose-headings:text-foreground prose-headings:font-semibold
        prose-p:text-muted-foreground prose-p:leading-relaxed
        prose-a:text-blue-400 prose-a:no-underline hover:prose-a:underline
        prose-strong:text-foreground
        prose-code:text-blue-400 prose-code:bg-muted prose-code:px-1 prose-code:py-0.5 prose-code:rounded
        prose-pre:bg-card prose-pre:border prose-pre:border-border
        prose-li:text-muted-foreground
        prose-blockquote:border-blue-500 prose-blockquote:text-muted-foreground"
      >
        <slot />
      </div>
    </article>
  </main>
  <Footer />
</BaseLayout>
